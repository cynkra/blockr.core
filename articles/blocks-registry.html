<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3. Browse for blocks • blockr.core</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="blocks-registry_files/libs/quarto-html/popper.min.js"></script><script src="blocks-registry_files/libs/quarto-html/tippy.umd.min.js"></script><link href="blocks-registry_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="blocks-registry_files/libs/quarto-html/light-border.css" rel="stylesheet">
<script src="blocks-registry_files/libs/quarto-diagram/mermaid.min.js"></script><script src="blocks-registry_files/libs/quarto-diagram/mermaid-init.js"></script><link href="blocks-registry_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="3. Browse for blocks">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.5.0/mermaid.min.js" integrity="sha512-3EZqKCkk3nMLmbrI7mfry81KH7dkzy/BoDfQrodwLQnS/RbsVlERdYP6J0oiJegRUxSOmx7Y35WNbVKSw7mipw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blockr.core</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/get-started.html">Get started</a></li>
    <li><a class="dropdown-item" href="../articles/create-block.html">Create a block</a></li>
    <li><a class="dropdown-item" href="../articles/blocks-registry.html">Browse for blocks</a></li>
    <li><a class="dropdown-item" href="../articles/extend-blockr.html">Extend blockr</a></li>
    <li><a class="dropdown-item" href="../articles/testing-blocks.html">Testing blocks</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BristolMyersSquibb/blockr.core/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>3. Browse for blocks</h1>




      <small class="dont-index">Source: <a href="https://github.com/BristolMyersSquibb/blockr.core/blob/main/vignettes/blocks-registry.qmd" class="external-link"><code>vignettes/blocks-registry.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bristolmyerssquibb.github.io/blockr.core">blockr.core</a></span><span class="op">)</span></span></code></pre></div>
</div>
<section class="level2"><h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <strong>registry</strong> is a <strong>environment</strong> which provides access to multiple <strong>blocks</strong> as well as some metadata:</p>
<ul>
<li>The block <strong>description</strong>.</li>
<li>The block <strong>category</strong>.</li>
<li>The block <strong>package</strong>.</li>
<li>…</li>
</ul>
<p>In other words, the <strong>registry</strong> is a <strong>“supermarket”</strong> for data analysis. As shown below, if you develop your own blocks package and registers blocks on load, these blocks become available to the end user. Therefore this makes it powerful for <strong>collaboration</strong> between data science teams.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p>
<figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  subgraph blockr_ggplot2[blockr.ggplot2]
    new_block1[New block]
    new_block2[New block]
  end
  subgraph blockr_echarts4r[blockr.echarts4r]
    new_block3[New block]
    new_block4[New block]
  end
  blockr_ggplot2 --&gt; |register| registry
  blockr_echarts4r --&gt; |register| registry
  subgraph registry[Registry]
    subgraph select_reg[Select block]
      reg_name[Name: select block]
      reg_descr[Description: select columns in a table]
      reg_classes[Classes: select_block, tranform_block]
      reg_category[Category: transform]
      reg_ctor[Construcor: new_select_block]
      reg_package[Package: blockr.dplyr]
    end
    subgraph filter_reg[Filter block]
    end
    filter_reg --x |unregister| trash['fa:fa-trash']
  end
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section><section class="level2"><h2 id="previewing-available-blocks">Previewing available blocks<a class="anchor" aria-label="anchor" href="#previewing-available-blocks"></a>
</h2>
<p>Upon loading, <code>{blockr}</code> <strong>registers</strong> its internal <strong>blocks</strong> with <code>register_blockr_blocks()</code>. You won’t have to call this function as it is not exported anyway. This makes the <strong>registry</strong> environment ready to be queried by <code><a href="../reference/register_block.html">available_blocks()</a></code>. A truncated output example below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/register_block.html">available_blocks</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"dataset_block"</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span>(<span class="at">dataset =</span> <span class="fu">character</span>(), <span class="at">package =</span> <span class="st">"datasets"</span>, ...) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>environment<span class="sc">:</span> namespace<span class="sc">:</span>blockr.core<span class="sc">&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">"name"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"dataset block"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">"description"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Choose a dataset from a package"</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">"classes"</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"dataset_block"</span> <span class="st">"data_block"</span>    <span class="st">"block"</span>         <span class="st">"vctrs_vctr"</span>    <span class="st">"list"</span>         </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">"category"</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"data"</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">"ctor_name"</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"new_dataset_block"</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">"package"</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"blockr.core"</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">"class"</span>)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"registry_entry"</span></span></code></pre></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="../reference/register_block.html">available_blocks</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "csv_block"     "dataset_block" "head_block"    "merge_block"  </span></span>
<span><span class="co">#&gt; [5] "rbind_block"   "scatter_block" "static_block"  "subset_block" </span></span>
<span><span class="co">#&gt; [9] "upload_block"</span></span></code></pre></div>
</div>
</section><section class="level2"><h2 id="register-a-block">Register a block<a class="anchor" aria-label="anchor" href="#register-a-block"></a>
</h2>
<p>To register your own blocks, user facing functions are:</p>
<ul>
<li>
<code><a href="../reference/register_block.html">register_block()</a></code> to register a block in the <strong>registry</strong>. If the <strong>block</strong> is already registered, it <strong>overwrites</strong> the existing one.</li>
<li>
<code><a href="../reference/register_block.html">register_blocks()</a></code> to register multiple blocks.</li>
</ul>
<p>Note that, if you develop your block outside a package context, you must call <code>register_block</code> (or <code>register_blocks</code>) passing the constructor as a function and not as a string (see below).</p>
<p>Let’s say you want to create a new <code>new_dummy_block</code> which does nothing specific in the <code>./R/dummy-block.R</code> script:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ./R/dummy-block.R</span></span>
<span><span class="va">new_dummy_block</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">text</span> <span class="op">=</span> <span class="st">"Hello World"</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/new_block.html">new_data_block</a></span><span class="op">(</span></span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">moduleServer</span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>          expr <span class="op">=</span> <span class="fu">reactive</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">tagList</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    class <span class="op">=</span> <span class="st">"dummy_block"</span>,</span>
<span>    <span class="va">...</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">register_dummy_blocks</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/register_block.html">register_blocks</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">new_dummy_block</span><span class="op">)</span>,</span>
<span>    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dummy block"</span><span class="op">)</span>,</span>
<span>    description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A block that does nothing"</span><span class="op">)</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">register_dummy_blocks</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<p>Finally, we create a <code>.R/zzz.R</code> script where you run this code to register the block(s) whenever the package loads:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ./R/zzz.R</span></span>
<span><span class="va">.onLoad</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">libname</span>, <span class="va">pkgname</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">register_dummy_blocks</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>If we now query the registry, the new block is available:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/register_block.html">available_blocks</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"dummy_block"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; function (text = "Hello World", ...) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     new_data_block(function(id) {</span></span>
<span><span class="co">#&gt;         moduleServer(id, function(input, output, session) {</span></span>
<span><span class="co">#&gt;             list(expr = reactive(quote(text)), state = list(text = text))</span></span>
<span><span class="co">#&gt;         })</span></span>
<span><span class="co">#&gt;     }, function(id) {</span></span>
<span><span class="co">#&gt;         tagList()</span></span>
<span><span class="co">#&gt;     }, class = "dummy_block", ...)</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; attr(,"name")</span></span>
<span><span class="co">#&gt; [1] "dummy block"</span></span>
<span><span class="co">#&gt; attr(,"description")</span></span>
<span><span class="co">#&gt; [1] "A block that does nothing"</span></span>
<span><span class="co">#&gt; attr(,"classes")</span></span>
<span><span class="co">#&gt; [1] "dummy_block" "data_block"  "block"       "vctrs_vctr"  "list"       </span></span>
<span><span class="co">#&gt; attr(,"category")</span></span>
<span><span class="co">#&gt; [1] "uncategorized"</span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "registry_entry"</span></span></code></pre></div>
</div>
</section><section class="level2"><h2 id="unregister-a-block">Unregister a block<a class="anchor" aria-label="anchor" href="#unregister-a-block"></a>
</h2>
<p>The counterpart of <code><a href="../reference/register_block.html">register_block()</a></code> is <code><a href="../reference/register_block.html">unregister_blocks()</a></code>. We can remove our new <code>dummy_block</code> from the registry:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/register_block.html">unregister_blocks</a></span><span class="op">(</span>uid <span class="op">=</span> <span class="st">"dummy_block"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check it out</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="../reference/register_block.html">available_blocks</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "csv_block"     "dataset_block" "head_block"    "merge_block"  </span></span>
<span><span class="co">#&gt; [5] "rbind_block"   "scatter_block" "static_block"  "subset_block" </span></span>
<span><span class="co">#&gt; [9] "upload_block"</span></span></code></pre></div>
</div>
<p>where <strong>uid</strong> is/are the block(s) class(s) passed in the constructor.</p>
</section><section class="level2"><h2 id="create-your-own-registry-ui">Create your own registry UI<a class="anchor" aria-label="anchor" href="#create-your-own-registry-ui"></a>
</h2>
<p>Within <code>blockr.core</code>, the registry is used to create a dropdown of possible blocks when the user wants to add a block:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">selectInput</span><span class="op">(</span></span>
<span>  <span class="fu">ns</span><span class="op">(</span><span class="st">"registry_select"</span><span class="op">)</span>,</span>
<span>  <span class="st">"Select block from registry"</span>,</span>
<span>  choices <span class="op">=</span> <span class="fu"><a href="../reference/register_block.html">list_blocks</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>In the <code>blockr.ui</code> <a href="">package</a>, we designed a more sofisticated UI for the registry. We leverage our <code>scoutbaR</code> <a href="https://cynkra.github.io/scoutbaR/" class="external-link">package</a> that provides a React-powered contextual menu with search and nicer metadata display. Block <strong>categories</strong> are first extracted to create the widget <strong>sections</strong> with <code><a href="https://rdrr.io/pkg/scoutbaR/man/scout_section.html" class="external-link">scout_section()</a></code> and passing the right <code>label</code>. Within each section (ie block category) we create one <code><a href="https://rdrr.io/pkg/scoutbaR/man/scout_action.html" class="external-link">scout_action()</a></code> per block. Each <code><a href="https://rdrr.io/pkg/scoutbaR/man/scout_action.html" class="external-link">scout_action()</a></code> display the block icon for better user experience, the block name and its description.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pak::pak("scoutbaR")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scoutbaR</span><span class="op">)</span></span>
<span><span class="va">blk_icon</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">category</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span></span>
<span>    <span class="va">category</span>,</span>
<span>    <span class="st">"data"</span> <span class="op">=</span> <span class="st">"table"</span>,</span>
<span>    <span class="st">"file"</span> <span class="op">=</span> <span class="st">"file-import"</span>,</span>
<span>    <span class="st">"parse"</span> <span class="op">=</span> <span class="st">"cogs"</span>,</span>
<span>    <span class="st">"plot"</span> <span class="op">=</span> <span class="st">"chart-line"</span>,</span>
<span>    <span class="st">"transform"</span> <span class="op">=</span> <span class="st">"wand-magic-sparkles"</span>,</span>
<span>    <span class="st">"table"</span> <span class="op">=</span> <span class="st">"table"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">blk_choices</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">blk_cats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu">chr_ply</span><span class="op">(</span><span class="fu"><a href="../reference/register_block.html">available_blocks</a></span><span class="op">(</span><span class="op">)</span>, \<span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">b</span>, <span class="st">"category"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">blk_cats</span>, \<span class="op">(</span><span class="va">cat</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/scoutbaR/man/scout_section.html" class="external-link">scout_section</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="va">cat</span>,</span>
<span>      .list <span class="op">=</span> <span class="fu">dropNulls</span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="../reference/register_block.html">available_blocks</a></span><span class="op">(</span><span class="op">)</span>, \<span class="op">(</span><span class="va">choice</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">choice</span>, <span class="st">"category"</span><span class="op">)</span> <span class="op">==</span> <span class="va">cat</span><span class="op">)</span> <span class="op">{</span></span>
<span>              <span class="fu"><a href="https://rdrr.io/pkg/scoutbaR/man/scout_action.html" class="external-link">scout_action</a></span><span class="op">(</span></span>
<span>                id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">choice</span>, <span class="st">"classes"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">choice</span>, <span class="st">"name"</span><span class="op">)</span>,</span>
<span>                description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">choice</span>, <span class="st">"description"</span><span class="op">)</span>,</span>
<span>                icon <span class="op">=</span> <span class="fu">blk_icon</span><span class="op">(</span><span class="va">cat</span><span class="op">)</span></span>
<span>              <span class="op">)</span></span>
<span>            <span class="op">}</span></span>
<span>          <span class="op">}</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>A demo is available below, where you can click on <code>New block</code> or press <code>cmd/ctrl + K</code> to trigger the contextual menu.</p>
<div>
<blockquote>
<p><strong>Note</strong></p>
<p>The demo below runs with shinylive. Not all feature may work as expected due to compatibility issues with webR.</p>
</blockquote>
</div>
<div class="cell">
<div class="cell-output-display">
<iframe class="border border-5 rounded shadow-lg" src="https://shinylive.io/r/app/#h=0&amp;code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMAdzgCMAnRRASwgGdSoAbbgCgA6YOtyIEA1gwwBXFkNwACBnFRF2CgLwKhAC1KlU7RAHpjBAJ4RJUDAHMWpHdLoYWRYyLGSMtOlmNCAJQCEL5MrBxcvILCohJSACao3OYM8koqapraYHoGRqYWVgw29o7Oru6e8T70-kEhYcxsnDz8QtXe7AmkMOnKqupauvqGJmaW1nYOTi5uHnHevvVgwaH04S1R7bFeUm79mUM5eWOFkyXT5XNVi1LLAash3CyMUAzmfJ1Ssmsvbx8vncMEkUgw-q8SoDvhhur0IQDPjC3GsGNIIAB9BJwGBEDFoVB8QJgAC+AF0gA" style="zoom: 0.75;" width="100%" height="1100px"></iframe>
</div>
</div>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicolas Bennett, David Granjon, Christoph Sax, Bristol Myers Squibb.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
